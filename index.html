<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Olivia ü§ç</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #ffeef8 0%, #ffe4f0 50%, #ffd9e8 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Cursor sparkle trail */
        .sparkle {
            position: fixed;
            pointer-events: none;
            animation: sparkleFloat 1s ease-out forwards;
            z-index: 9999;
        }

        @keyframes sparkleFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-30px) scale(0);
            }
        }

        /* Confetti styles */
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            pointer-events: none;
            z-index: 9998;
            animation: confettiFall 3s ease-out forwards;
        }

        .confetti.heart::before {
            content: 'ü§ç';
            font-size: 20px;
            display: block;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Floating hearts animation */
        .heart {
            position: absolute;
            font-size: 20px;
            animation: float 15s infinite;
            opacity: 0;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .container {
            max-width: 800px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            padding: 60px 50px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3em;
            color: #ff6b9d;
            margin-bottom: 10px;
            font-family: 'Brush Script MT', cursive;
            text-shadow: 0 0 20px rgba(255, 107, 157, 0.3);
        }

        .header .to {
            font-size: 1.4em;
            color: #c44569;
            font-style: italic;
        }

        .divider {
            width: 100px;
            height: 2px;
            background: linear-gradient(to right, #ff6b9d, #c44569);
            margin: 30px auto;
        }

        .letter {
            line-height: 1.8;
            color: #333;
            font-size: 1.1em;
            text-align: left;
        }

        .letter p {
            margin-bottom: 20px;
            opacity: 0;
        }

        .letter p.animate {
            animation: fadeInUp 0.8s ease-out forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .salutation {
            font-style: italic;
            color: #c44569;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .signature {
            text-align: right;
            margin-top: 40px;
            font-style: italic;
            color: #c44569;
            font-size: 1.2em;
        }

        .signature .from {
            font-size: 0.9em;
            color: #666;
        }

        /* View Photos Button */
        .view-photos-btn {
            display: block;
            margin: 40px auto 0;
            padding: 18px 45px;
            font-size: 1.3em;
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Georgia', serif;
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.4);
            transition: transform 0.3s, box-shadow 0.3s;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 2s forwards;
        }

        .view-photos-btn:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.6);
        }

        /* Decorative elements */
        .corner-decoration {
            position: absolute;
            width: 100px;
            height: 100px;
            opacity: 0.1;
        }

        .corner-decoration.top-left {
            top: 20px;
            left: 20px;
            border-top: 3px solid #ff6b9d;
            border-left: 3px solid #ff6b9d;
        }

        .corner-decoration.bottom-right {
            bottom: 20px;
            right: 20px;
            border-bottom: 3px solid #ff6b9d;
            border-right: 3px solid #ff6b9d;
        }

        /* Photo Gallery Page */
        .gallery-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffeef8 0%, #ffe4f0 50%, #ffd9e8 100%);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .gallery-page.active {
            opacity: 1;
            pointer-events: all;
        }

        .gallery-container {
            max-width: 900px;
            width: 90%;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        .gallery-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .gallery-header h2 {
            font-size: 2.5em;
            color: #ff6b9d;
            font-family: 'Brush Script MT', cursive;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255, 107, 157, 0.3);
        }

        .gallery-header p {
            color: #c44569;
            font-style: italic;
            font-size: 1.2em;
        }

        .slideshow {
            position: relative;
            width: 100%;
            height: 500px;
            margin: 30px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #fff5f8 0%, #ffe8f0 100%);
        }

        .slide.active {
            opacity: 1;
        }

        .slide img {
            max-width: 100%;
            max-height: 450px;
            object-fit: contain;
            border-radius: 10px;
        }

        /* Placeholder for images */
        .slide-placeholder {
            width: 400px;
            height: 400px;
            background: linear-gradient(135deg, #ffd9e8, #ffc4d6);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2em;
            text-align: center;
            padding: 20px;
        }

        .slide-counter {
            text-align: center;
            color: #c44569;
            font-size: 1.1em;
            margin: 20px 0;
        }

        .slideshow-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .control-btn {
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1.1em;
            cursor: pointer;
            font-family: 'Georgia', serif;
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 157, 0.5);
        }

        .close-gallery {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #f0f0f0;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5em;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-gallery:hover {
            transform: scale(1.1);
            background: #e0e0e0;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 40px 30px;
            }

            .header h1 {
                font-size: 2.2em;
            }

            .letter {
                font-size: 1em;
            }

            .slideshow {
                height: 400px;
            }

            .slide img {
                max-height: 350px;
            }

            .gallery-container {
                padding: 30px 20px;
            }

            .gallery-header h2 {
                font-size: 2em;
            }
        }

        /* Envelope Cover */
        .envelope-cover {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            cursor: pointer;
            transition: opacity 1s ease;
        }

        .envelope-cover.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .big-heart {
            font-size: 120px;
            animation: heartbeat 1.5s infinite;
            color: white;
        }

        .open-message {
            color: white;
            font-size: 1.5em;
            margin-top: 30px;
            font-family: 'Georgia', serif;
            text-align: center;
            padding: 0 20px;
        }

        .envelope-cover .splash-image {
            width: 340px;
            height: 340px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
            margin-top: 24px;
        }

        @media (max-width: 768px) {
            .envelope-cover .splash-image {
                width: 240px;
                height: 240px;
            }
        }

        @keyframes heartbeat {
            0%, 100% {
                transform: scale(1);
            }
            25% {
                transform: scale(1.1);
            }
            50% {
                transform: scale(1);
            }
        }

        /* Valentine Question Screen */
        .valentine-question {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffeef8 0%, #ffe4f0 50%, #ffd9e8 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            transition: opacity 1s ease;
        }

        .valentine-question.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .question-title {
            font-size: 2.5em;
            color: #c44569;
            font-family: 'Georgia', serif;
            margin-bottom: 50px;
            text-align: center;
            padding: 0 20px;
        }

        .cat-image {
            width: 200px;
            height: 200px;
            margin-bottom: 30px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.3);
            animation: float-gentle 3s ease-in-out infinite;
        }

        @keyframes float-gentle {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .button-container {
            display: flex;
            gap: 30px;
            position: relative;
        }

        .yes-button, .no-button {
            padding: 20px 50px;
            font-size: 1.5em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Georgia', serif;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .yes-button {
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            color: white;
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.4);
            position: relative;
            z-index: 1005;
        }

        .yes-button:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.6);
        }

        .no-button {
            background: #f0f0f0;
            color: #666;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: fixed;
            z-index: 1004;
            transition: all 0.3s ease;
        }

        @media (max-width: 768px) {
            .question-title {
                font-size: 1.8em;
            }

            .yes-button, .no-button {
                padding: 15px 35px;
                font-size: 1.2em;
            }

            .button-container {
                gap: 20px;
            }
        }

        /* Music toggle button */
        .music-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.4);
            z-index: 999;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-toggle:hover {
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .music-toggle {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>

    <!-- Valentine Question -->
    <div class="valentine-question" id="valentine-question">
        <img src="cat.jpeg" alt="Cute cat with hearts" class="cat-image">
        <h1 class="question-title">Olivia, will you be my Valentine? üíï</h1>
        <div class="button-container">
            <button class="yes-button" onclick="sayYes()">Yes! ü§ç</button>
            <button class="no-button" id="noButton" tabindex="-1">No</button>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="background-music" loop>
        <source src="musicbg.mp3" type="audio/mpeg">
    </audio>

    <!-- Music Toggle Button -->
    <button class="music-toggle" id="musicToggle" onclick="toggleMusic()" title="Toggle music">üéµ</button>

    <!-- Envelope Cover -->
    <div class="envelope-cover" id="envelope" onclick="openLetter()">
        <div class="big-heart">ü§ç</div>
        <div class="open-message">Click to open your Valentine's letter from Ivan</div>
        <img src="green-fn-splash.gif" alt="greenfn" class="splash-image">
    </div>

    <!-- Photo Gallery Page -->
    <div class="gallery-page" id="gallery-page">
        <div class="gallery-container">
            <button class="close-gallery" onclick="closeGallery()">‚úï</button>
            
            <div class="gallery-header">
                <h2>Our Memories Together</h2>
                <p>Every moment with you is special ü§ç</p>
            </div>

            <div class="slideshow" id="slideshow">
                <!-- Photo 1 -->
                <div class="slide active">
                    <img src="img/image1.jpeg" alt="Memory 1" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 1<br>Replace with: photo1.jpg</div>
                </div>
                
                <!-- Photo 2 -->
                <div class="slide">
                    <img src="img/image2.jpeg" alt="Memory 2" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 2<br>Replace with: photo2.jpg</div>
                </div>
                
                <!-- Photo 3 -->
                <div class="slide">
                    <img src="img/image3.jpeg" alt="Memory 3" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 3<br>Replace with: photo3.jpg</div>
                </div>
                
                <!-- Photo 4 -->
                <div class="slide">
                    <img src="img/image4.jpeg" alt="Memory 4" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 4<br>Replace with: photo4.jpg</div>
                </div>
                
                <!-- Photo 5 -->
                <div class="slide">
                    <img src="img/image5.jpeg" alt="Memory 5" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 5<br>Replace with: photo5.jpg</div>
                </div>
                
                <!-- Photo 6 -->
                <div class="slide">
                    <img src="img/image6.jpeg" alt="Memory 6" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 6<br>Replace with: photo6.jpg</div>
                </div>
                
                <!-- Photo 7 -->
                <div class="slide">
                    <img src="img/image7.jpeg" alt="Memory 7" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 7<br>Replace with: photo7.jpg</div>
                </div>
                
                <!-- Photo 8 -->
                <div class="slide">
                    <img src="img/image8.jpeg" alt="Memory 8" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 8<br>Replace with: photo8.jpg</div>
                </div>
                
                <!-- Photo 9 -->
                <div class="slide">
                    <img src="img/image9.jpeg" alt="Memory 9" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 9<br>Replace with: photo9.jpg</div>
                </div>
                
                <!-- Photo 10 -->
                <div class="slide">
                    <img src="img/image10.jpeg" alt="Memory 10" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 10<br>Replace with: photo10.jpg</div>
                </div>
                
                <!-- Photo 11 -->
                <div class="slide">
                    <img src="img/image11.jpeg" alt="Memory 11" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 11<br>Replace with: photo11.jpg</div>
                </div>
                
                <!-- Photo 12 -->
                <div class="slide">
                    <img src="img/image12.jpeg" alt="Memory 12" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="slide-placeholder" style="display:none;">Photo 12<br>Replace with: photo12.jpg</div>
                </div>
            </div>

            <div class="slide-counter">
                <span id="current-slide">1</span> / 12
            </div>

            <div class="slideshow-controls">
                <button class="control-btn" onclick="previousSlide()">‚Üê Previous</button>
                <button class="control-btn" onclick="nextSlide()">Next ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="corner-decoration top-left"></div>
        <div class="corner-decoration bottom-right"></div>
        
        <div class="header">
            <h1>Happy Valentine's Day</h1>
            <div class="to">For Olivia ü§ç</div>
        </div>

        <div class="divider"></div>

        <div class="letter">
            <p class="salutation">My love,</p>
            
            <p>Happy Valentine's Day ü§ç  I've been thinking a lot about how to put everything I feel into words, and even now it feels like no letter could fully capture what you mean to me.</p>

            <p>From the moment you came into my life, things started to feel different in the best way. You brought a sense of peace and warmth that I didn't even realize I was missing. Being with you feels natural, effortless, and safe, like I can fully be myself and autistic without fear or pretending. That's something incredibly rare, and I never take it for granted.</p>

            <p>I love the little things about you just as much as the big ones. The way you laugh, the way you care so deeply, the way you show up for the people you love. I love how strong you are, how thoughtful you are, and how you somehow make every day feel lighter just by being part of it. Even when life gets overwhelming, knowing I have you makes everything feel manageable.</p>

            <p>You've taught me so much without even trying - about patience, about understanding, and about what it really means to care for someone. You make me want to be better, not out of pressure, but because loving you makes me want to grow. I want to be someone you can always rely on, someone who supports your dreams, stands by you through the hard days, and celebrates every win with you.</p>

            <p>This being our first Valentine's together makes it even more special to me. It's not just about today, it's about all the memories we're creating and all the ones we haven't even lived yet. I think about the future with you and it feels exciting, comforting, and full of possibility. Wherever life takes us, I want to walk through it with you, side by side. (Summer 2026 hehe)</p>

            <p>Thank you for choosing me, for believing in me, and for loving me the way you do. Thank you for your patience, your kindness, and your heart. I don't say this lightly, you mean more to me than words can explain.</p>

            <p>I promise to keep showing up for you, to keep listening, to keep learning, and to keep loving you with everything I have. Today, tomorrow, and every day after.</p>

            <p>I love you more than I can put into words, always and forever.</p>

            <div class="signature">
                <div class="from">Your diva,</div>
                <div>Ivan</div>
            </div>
        </div>

        <button class="view-photos-btn" onclick="openGallery()">View Our Memories üì∏</button>
    </div>

    <script>
        let musicPlaying = false;
        let currentSlide = 0;
        const totalSlides = 12;

        // Sparkle cursor trail
        document.addEventListener('mousemove', (e) => {
            if (Math.random() > 0.85) { // Random sparkles
                createSparkle(e.pageX, e.pageY);
            }
        });

        function createSparkle(x, y) {
            const sparkle = document.createElement('div');
            sparkle.classList.add('sparkle');
            sparkle.innerHTML = '‚ú®';
            sparkle.style.left = x + 'px';
            sparkle.style.top = y + 'px';
            sparkle.style.fontSize = (Math.random() * 10 + 10) + 'px';
            document.body.appendChild(sparkle);

            setTimeout(() => sparkle.remove(), 1000);
        }

        // Heart confetti explosion
        function createConfetti() {
            const confettiCount = 100;
            
            for (let i = 0; i < confettiCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti', 'heart');
                    
                    // Random starting position across the top
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-50px';
                    
                    // Random animation duration and delay
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    confetti.style.animationDelay = (Math.random() * 0.5) + 's';
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 5000);
                }, i * 30);
            }
        }

        // Animate letter paragraphs with proper timing
        function animateLetterParagraphs() {
            const letterParagraphs = document.querySelectorAll('.letter p');
            letterParagraphs.forEach((p, index) => {
                setTimeout(() => {
                    p.classList.add('animate');
                }, index * 200);
            });
        }

        // Toggle music function
        function toggleMusic() {
            const audio = document.getElementById('background-music');
            const button = document.getElementById('musicToggle');
            
            if (musicPlaying) {
                audio.pause();
                button.textContent = 'üîá';
                musicPlaying = false;
            } else {
                audio.play().catch(err => {
                    console.log('Audio play failed:', err);
                });
                button.textContent = 'üéµ';
                musicPlaying = true;
            }
        }

        // Auto-start music on first user interaction
        let musicStarted = false;
        document.addEventListener('click', () => {
            if (!musicStarted) {
                const audio = document.getElementById('background-music');
                audio.play().catch(err => {
                    console.log('Audio play failed:', err);
                });
                document.getElementById('musicToggle').textContent = 'üéµ';
                musicPlaying = true;
                musicStarted = true;
            }
        }, { once: true });

        // Create floating hearts
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = 'ü§ç';
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDuration = (Math.random() * 10 + 10) + 's';
            heart.style.animationDelay = Math.random() * 5 + 's';
            document.body.appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, 20000);
        }

        // Create hearts periodically
        setInterval(createHeart, 800);

        // Create initial hearts
        for (let i = 0; i < 10; i++) {
            setTimeout(createHeart, i * 300);
        }

        // Open letter function
        function openLetter() {
            document.getElementById('envelope').classList.add('hidden');
            setTimeout(animateLetterParagraphs, 500);
        }

        // Gallery functions
        function openGallery() {
            document.getElementById('gallery-page').classList.add('active');
        }

        function closeGallery() {
            document.getElementById('gallery-page').classList.remove('active');
        }

        function showSlide(index) {
            const slides = document.querySelectorAll('.slide');
            slides.forEach(slide => slide.classList.remove('active'));
            
            if (index >= totalSlides) {
                currentSlide = 0;
            } else if (index < 0) {
                currentSlide = totalSlides - 1;
            } else {
                currentSlide = index;
            }
            
            slides[currentSlide].classList.add('active');
            document.getElementById('current-slide').textContent = currentSlide + 1;
        }

        function nextSlide() {
            showSlide(currentSlide + 1);
        }

        function previousSlide() {
            showSlide(currentSlide - 1);
        }

        // Auto-advance slideshow every 4 seconds when gallery is open
        setInterval(() => {
            if (document.getElementById('gallery-page').classList.contains('active')) {
                nextSlide();
            }
        }, 4000);

        // Keyboard navigation for slideshow
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('gallery-page').classList.contains('active')) {
                if (e.key === 'ArrowLeft') previousSlide();
                if (e.key === 'ArrowRight') nextSlide();
                if (e.key === 'Escape') closeGallery();
            }
        });

        // Move the No button to a random position on the viewport
        function moveButton() {
            const button = document.getElementById('noButton');
            const padding = 20;
            const maxX = Math.max(0, window.innerWidth - button.offsetWidth - padding);
            const maxY = Math.max(0, window.innerHeight - button.offsetHeight - padding);
            const randomX = Math.floor(Math.random() * maxX) + padding;
            const randomY = Math.floor(Math.random() * maxY) + padding;

            button.style.left = randomX + 'px';
            button.style.top = randomY + 'px';
        }

        // Place the No button initially near the Yes button (but fixed)
        function positionNoButtonInitial() {
            const button = document.getElementById('noButton');
            const yes = document.querySelector('.yes-button');
            if (!button || !yes) return;
            
            const rect = yes.getBoundingClientRect();
            const gap = 30;
            
            let left = rect.right + gap;
            let top = rect.top;
            
            if (left + button.offsetWidth > window.innerWidth - 20) {
                left = rect.left;
                top = rect.bottom + 20;
            }
            
            left = Math.min(Math.max(left, 10), window.innerWidth - button.offsetWidth - 10);
            top = Math.min(Math.max(top, 10), window.innerHeight - button.offsetHeight - 10);
            
            button.style.left = left + 'px';
            button.style.top = top + 'px';
        }

        // When Yes is clicked - CONFETTI TIME!
        function sayYes() {
            createConfetti();
            setTimeout(() => {
                document.getElementById('valentine-question').classList.add('hidden');
            }, 500);
        }

        // Initialize when page loads
        window.addEventListener('load', () => {
            const noBtn = document.getElementById('noButton');
            if (!noBtn) return;

            positionNoButtonInitial();

            noBtn.addEventListener('mouseenter', moveButton);
            noBtn.addEventListener('mouseover', moveButton);
            noBtn.addEventListener('click', (e) => {
                e.preventDefault();
                moveButton();
            });
            noBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                moveButton();
            }, { passive: false });
            noBtn.addEventListener('focus', moveButton);

            window.addEventListener('resize', positionNoButtonInitial);
        });
    </script>
</body>
</html>
